
// Hide author in headlines
@feedlish-hide-author-in-headlines: false;

// Hide score in headlines
@feedlish-hide-score-in-headlines: false;

// Inner padding of panels/frames
@feedlish-panels-padding: 20px;

// Color of feed tree icons
@feedlish-feedtree-icons-color: lighten(@default-text, 40%);

@import "../css/default.less";

// FIXME: Feedly's light #fffad4 @color-accent doesn't play well with
// default.less: it is used a lot with white/light colors.

@color-panel-bg: #eeeeee;
@border-default: @color-panel-bg;

// See codepoint at /tt-rss/lib/iconfont/codepoints
.feedlish-material-icon(@codepoint) {
	font-family: 'Material Icons';
	font-size: 18px;
	line-height: 1;
	font-style: normal;
	font-weight: normal;
	content: @codepoint;
}

// Disable most of animations/transitions
// FIXME: it doesn't remove the feed tree fold/unfold animation
* { transition: none ! important; }

body.ttrss_main {

	//
	// General
	//

	// Increase all panels inner paddings
	// - Toolbar top
	#toolbar-frame #toolbar { padding: @feedlish-panels-padding 0; }
	// - Feed tree panel top
	#feedTree > .dijitTreeContainer > div { padding-top: @feedlish-panels-padding; }
	// - Main panel sides
	#toolbar-frame,
	#headlines-frame,
	// - Post panel sides
	#content-insert .post > div,
	// - Expanded post in combined mode
	.cdm.expandable div.content,
	// - Feed tree panel sides
	#feedTree > .dijitTreeContainer > div {
		padding-left: @feedlish-panels-padding;
		padding-right: @feedlish-panels-padding;
	}

	// Make splitters look like part of panels
	.dijitSplitter, .dijitSplitterV { background: @color-panel-bg; }

	//
	// Feed Tree Frame
	//

	// Remove the border between the feed tree and headlines panel
	#feeds-holder { box-shadow: none; }

	// Tweak feed tree
	#feeds-holder #feedTree {

		// Remove border from rows
		.dijitTreeRow { border: none ! important; }

		// Simpler counter (unread)
		.counterNode {
			border: none;
			background: none;
			color: @default-text;
		}
		// Simpler counter (read)
		.counterNode.aux {
			border: none;
			background: none;
			color: lighten(@default-text, 40%);
		}

		// Re-align counters
		.counterNode {
			min-width: unset;
			margin-top: unset;
			line-height: unset;
		}

		// Tweak special icons
		.icon.material-icons:not(.icon-label) {
			color: @feedlish-feedtree-icons-color ! important;
		}
		// Tweak tree arrow icons
		.dijitTreeExpando::before {
			color: @feedlish-feedtree-icons-color ! important;
		}
		.dijitTreeExpando.dijitTreeExpandoClosed::before {
			.feedlish-material-icon("\e315"); // keyboard_arrow_right
		}
		.dijitTreeExpando.dijitTreeExpandoOpened::before {
			.feedlish-material-icon("\e313"); // keyboard_arrow_down
		}

		// Lighten loading gifs
		.loadingExpando, .loadingNode { opacity: 0.4; }
	}

	//
	// Toolbar Frame
	//

	// Remove italic from "N article selected" in toolbar
	#toolbar-frame #toolbar #selected_prompt {
		font-style: normal;
	}

	// Remove toolbar border
	#toolbar-frame #toolbar { border: none; }

	//
	// Headlines Frame
	//

	// Tweak headline content
	#headlines-frame div[id^="RROW"] {

		// Change headline elements order:
		&.hl, & .header {
			// - Score and feed icon
			> :nth-child(5) { order: 1; }
			// - Feed Name
			> :nth-child(3) { order: 2; }
			// - Title
			> :nth-child(2) { order: 3; }
			// - Date
			> :nth-child(4) { order: 4; }
			// - Buttons select/share/star
			> :nth-child(1) { order: 5; }
		}

		// Show buttons only on hover or marked
		&.hl, & .header { > :nth-child(1) { display: none; } }
		&:hover, &.marked, &.published, &.Selected {
			&.hl, & .header { > :nth-child(1) { display: flex; } }
		}

		// Tweak title:
		div.title, span.titleWrap {

			// Tweak label look
			.label {
				font-size: 11px;
				padding: 1px 6px;
				border-radius: 99px;
			}
			.label > i {
				display: none;
			}

			// Tweak font
			a {
				opacity: 0.8; // easier than re-writing all the colors
			}

			// Keep the same font size when combined expanded or not
			a { font-size: 14px ! important; }

			// Hide author
			.author when (@feedlish-hide-author-in-headlines = true) {
				display: none;
			}

			// Remove hover underline
			a:hover { text-decoration: none; }

		} // Tweak title

		// Do not wrap title (except when active)
		&.hl, &:not(.active) .header {
			.title, .titleWrap {
				overflow: hidden;
				white-space: nowrap;
			}
		}

		// Make the full headline title height clickable (remove non-clickable space
		// in-between titles)
		&.hl, & .header {
			> * { padding: 0 10px 0 0; }
		}
		a.title {
			// line-height sets the height, but we need padding to get it clickable
			line-height: 30px;
			padding: 6px 0;
		}

		// Feed name look
		.feed a {
			font-size: 11px;
			padding: 1px 6px;
			border-radius: 99px;
			font-style: normal;
		}

		// Feed name fixed width
		.feed {
			min-width: 120px;
		}
		.feed a {
			max-width: 110px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}
		// FIXME: remove .feed when a is empty
		.feed a:empty {
			display: none;
		}

		// Highlight on hover
		&:not(.Selected):hover {
			&.hl, & .header { background: darken(@default-bg, 5%); }
		}

		// Remove background color from Read headlines
		&:not(.Selected) {
			&.hl, & .header { background: @default-bg; }
		}

		// Hide score icon
		.icon-score when (@feedlish-hide-score-in-headlines = true) {
			display: none;
		}

	} // Tweak headline content

	// Show feed name in headlines, even in wide screen mode
	div#headlines-frame.wide .hl .feed { display: inline-flex; }

	// Remove separator border for:
	// - Headlines: invisible border, so everyone is the same height
	.hl, div#headlines-frame div.cdm.expandable { border: 1px solid @default-bg; }
	// - "Loading, please wait" or "No articles found to display" in headlines panel
	div.whiteBox { border: none; }
	// But, keep border for combined mode expanded post:
	div#headlines-frame div.cdm.expandable.active {
		border: 1px solid darken(@default-bg, 20%);
	}

	// Remove bold italic from "Click to open next unread feed"
	#headlines-spacer { font-style: normal; }
	// Re-align loading icon
	.loading img { vertical-align: middle; }

	// Fix the default favicon size (to match other favicons)
	i.material-icons.icon-no-feed {
		width: 16px ! important;
		height: 16px ! important;
		padding: 0 ! important;
		margin: 0px 4px  ! important;
	}

} // ttrss_main

// Local customization in a separate file
@import (optional) "./local.less";
